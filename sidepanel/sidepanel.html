<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pawz Sidepanel</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- HEADER (FIXE) -->
    <header class="w-header">
      <div class="brand-area">
        <img src="../assets/logo.svg" alt="Pawz" class="logo-icon" />
        <!-- S√©lecteur de Job (NOUVEAU) -->
        <select id="job-selector" class="job-dropdown">
          <option value="" disabled selected>Chargement...</option>
          <!-- Options seront inject√©es ici -->
          <option value="new">+ Nouveau Poste</option>
        </select>
      </div>
      <div class="actions-area">
        <button id="btn-settings" class="icon-btn" title="Param√®tres">
          ‚öôÔ∏è
        </button>
      </div>
    </header>

    <!-- MAIN CONTENT (DASHBOARD) -->
    <main id="view-dashboard" class="w-body">
      <!-- Stats Rapides -->
      <div class="queue-stats">
        <span class="stat-badge">‚è≥ <span id="count-pending">0</span></span>
        <span class="stat-badge">‚úÖ <span id="count-done">0</span></span>
      </div>

      <!-- Liste des Candidats -->
      <div id="candidates-list" class="candidates-container">
        <!-- Empty State par d√©faut -->
        <div class="empty-state">
          <p>Aucun candidat pour ce poste.</p>
          <small
            >Cliquez sur la pastille Pawz sur LinkedIn pour ajouter des
            profils.</small
          >
        </div>
      </div>
    </main>

    <!-- DETAIL OVERLAY (SLIDE-IN) -->
    <div id="detail-overlay" class="detail-panel hidden">
      <!-- Navigation Rapide -->
      <div class="detail-nav">
        <button id="btn-close-detail" class="back-btn">‚Üê Retour</button>
        <div class="nav-arrows">
          <button
            id="btn-prev-candidate"
            class="nav-arrow-btn"
            title="Pr√©c√©dent"
          >
            ‚¨Ü
          </button>
          <button id="btn-next-candidate" class="nav-arrow-btn" title="Suivant">
            ‚¨á
          </button>
        </div>
      </div>

      <!-- Contenu Analyse (R√©cup√©r√© de la V1 mais √©pur√©) -->
      <div class="analysis-content">
        <div class="score-header">
          <h1 id="detail-score" class="score-display">--%</h1>
          <span id="detail-verdict" class="verdict-badge">En attente</span>
        </div>

        <h2 id="detail-name" class="candidate-name-detail">Nom du Candidat</h2>
        <p id="detail-title" class="candidate-title-detail">Titre du poste</p>

        <!-- Accord√©ons -->
        <div class="accordion open">
          <div class="accordion-header">
            <span>‚úÖ Points Forts</span>
            <div class="header-chevron">‚ñº</div>
          </div>
          <div class="accordion-content">
            <ul id="detail-strengths" class="list-check"></ul>
          </div>
        </div>

        <div class="accordion">
          <div class="accordion-header">
            <span>‚ö†Ô∏è Vigilance</span>
            <div class="header-chevron">‚ñº</div>
          </div>
          <div class="accordion-content">
            <ul id="detail-warnings" class="list-warn"></ul>
          </div>
        </div>

        <div class="accordion">
          <div class="accordion-header">
            <span>ü§ñ R√©sum√©</span>
            <div class="header-chevron">‚ñº</div>
          </div>
          <div class="accordion-content">
            <p id="detail-summary"></p>
          </div>
        </div>
      </div>

      <!-- Actions Footer -->
      <div class="detail-footer">
        <a id="btn-open-linkedin" href="#" target="_blank" class="btn-secondary"
          >Voir Profil</a
        >
        <button id="btn-delete-current" class="btn-danger">Rejeter</button>
      </div>
    </div>

    <!-- SETTINGS OVERLAY (R√©cup√©r√© de la V1) -->
    <div id="settings-overlay" class="settings-overlay hidden">
      <div class="w-header">
        <div class="brand-area">
          <button
            id="btn-back-settings"
            class="icon-btn"
            style="margin-right: 10px"
          >
            ‚Üê
          </button>
          <span class="brand-name">Param√®tres</span>
        </div>
        <div class="actions-area">
          <button id="btn-close-settings" class="icon-btn" title="Fermer">
            √ó
          </button>
        </div>
      </div>

      <div class="w-body">
        <p class="settings-header-text">
          Connectez votre Cl√© API Google Gemini pour activer l'analyseur.
        </p>
        <!-- (Contenu V1 Settings conserv√© pour compatibilit√©) -->
        <div class="provider-card active-provider open">
          <div class="provider-header">
            <div class="header-left">
              <span class="provider-name">Google Gemini</span>
            </div>
          </div>
          <div class="api-config-area" style="display: block">
            <div class="api-input-group">
              <label class="api-label">Cl√© API</label>
              <div class="api-input-wrapper">
                <input
                  id="api-key-input"
                  type="text"
                  class="api-input"
                  placeholder="AIzaSyD..."
                  autocomplete="off"
                />
                <button id="btn-save-api" class="btn-validate">Valider</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>
